<%- include('../includes/start-part.ejs') %> <%- include('../includes/head.ejs')
%>

<body>
  <div class="container">
    <%- include('../includes/header.ejs') %>

    <div class="row">
      <%- include('../includes/profile.ejs') %>

      <div class="col-8">
        <div class="row row d-flex justify-content-center">
          <table class="table">
            <thead class="table-primary">
              <tr>
                <th class="text-center" scope="col" width="10%">번호</th>
                <th class="text-center" scope="col" width="60%">제목</th>
                <th class="text-center" scope="col" width="30%">글쓴이</th>
              </tr>
            </thead>
            <tbody>
              <% posts.forEach((post,idx) => { %>
              <tr>
                <td class="post_id text-center"><%= post.id %></td>
                <td class="title text-truncate">
                  <a href="/post/<%= post.id %>"><%= post.title%></a>
                </td>
                <td class="author text-center "><%= post.name %></td>
              </tr>
              <% }) %>
            </tbody>
          </table>
          <ul class="pagination d-flex align-items-center">
            <% if(+pageNumber !== 0){ %>
            <li class="page-item">
              <a class="page-link" href="/posts?page=<%= Math.max(pageNumber-1, 0) %>">
                << /a>
            </li>
            <% } %>
            <% for(let i=0; i<count/10; i++){ %>
            <li class="page-item"><a class="page-link" href=<%= "/posts?page="+i %>><%= i+1 %></a></li>
            <% } %>
            <% if(+pageNumber !== +Math.floor(count/10)){ %>
            <li class="page-item">
              <a class="page-link" href="/posts?page=<%= Math.min(pageNumber+1, Math.floor(count/10)) %>">></a>
            </li>
            <% } %>
          </ul>
        </div>
      </div>

      <%- include('../includes/rank.ejs') %>
    </div>
  </div>

  <%- include('../includes/footer.ejs') %>
</body>
<%- include('../includes/end-part.ejs') %>